<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Current Measurement | Harmony 3 Motor Control</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Current Measurement" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Motor Control package" /> <meta property="og:description" content="Harmony 3 Motor Control package" /> <link rel="canonical" href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/current_measurement.html" /> <meta property="og:url" content="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/current_measurement.html" /> <meta property="og:site_name" content="Harmony 3 Motor Control" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Current Measurement" /> <script type="application/ld+json"> {"@type":"WebPage","url":"../../../../algorithms/pmsm_foc/mc_plant_docs/theory/current_measurement.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"headline":"Current Measurement","description":"Harmony 3 Motor Control package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../../../index.html" class="nav-list-link">Microchip MPLAB® Harmony 3 Motor Control</a></li><li class="nav-list-item"><a href="../../../../algorithms/pmsm_foc/readme.html" class="nav-list-link">PMSM FOC Component</a></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../algorithms/pmsm_foc/mc_plant_docs/introduction.html" class="nav-list-link">Motor Control Plant Projects</a><ul class="nav-list "><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/theoretical_background.html" class="nav-list-link">Theoretical Background</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/pmsm_motor.html" class="nav-list-link">Permanent Magnet Synchronous Motors</a> </li><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/field_oriened_control.html" class="nav-list-link">Field Oriented Control</a> </li><li class="nav-list-item active"> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/current_measurement.html" class="nav-list-link active">Current Measurement</a> </li><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/rotor_position_measurement.html" class="nav-list-link">Rotor Position Calculation</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/software_design.html" class="nav-list-link">Software Design</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/software_architecture.html" class="nav-list-link">Implementation Details</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/getting_started.html" class="nav-list-link">Getting Started</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/create_mc_project_with_mcc.html" class="nav-list-link">Create MCC project for MC Plant</a> </li><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/motor_control_plant_manager.html" class="nav-list-link">MC Plant Manager</a> </li><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/hardware_modules.html" class="nav-list-link">Hardware Modules</a> </li><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/peripheral_modules.html" class="nav-list-link">Peripheral Modules</a> </li><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/software_modules.html" class="nav-list-link">Software Modules</a> </li><li class="nav-list-item "> <a href="../../../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/generate_mc_code_with_mcc.html" class="nav-list-link">Generate Code with MCC</a> </li></ul></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../algorithms/pmsm_foc/non_mc_plant.html" class="nav-list-link">Non Motor Control Plant Projects</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../../algorithms/pmsm_foc/sw_design.html" class="nav-list-link">Software Design</a></li><li class="nav-list-item "><a href="../../../../algorithms/pmsm_foc/control_algorithm.html" class="nav-list-link">Control Algorithm</a></li><li class="nav-list-item "><a href="../../../../algorithms/pmsm_foc/configurations.html" class="nav-list-link">Configuring the Library</a></li><li class="nav-list-item "><a href="../../../../algorithms/pmsm_foc/using_the_library.html" class="nav-list-link">Using the Library</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../../../release_notes.html" class="nav-list-link">Release notes</a><ul class="nav-list "><li class="nav-list-item "><a href="../../../../apps/readme.html" class="nav-list-link">Motor Control Application Repositories</a></li></ul></li><li class="nav-list-item"><a href="../../../../mplab_harmony_license.html" class="nav-list-link">License</a></li><li class="nav-list-item"><a href="../../../../plugins/mc_plant/intro.html" class="nav-list-link">Getting Started with Create React App</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 Motor Control" aria-label="Search Harmony 3 Motor Control" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../../../algorithms/pmsm_foc/mc_plant_docs/introduction.html">Motor Control Plant Projects</a></li> <li class="breadcrumb-nav-list-item"><a href="../../../../algorithms/pmsm_foc/mc_plant_docs/theory/theoretical_background.html">Theoretical Background</a></li> <li class="breadcrumb-nav-list-item"><span>Current Measurement</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <style> body { counter-reset: h1; padding: 20px; } h1 { background-color: red; color: white; counter-reset: h2 } h2 { background-color: red; color: white; counter-reset: h3 } h3 { background-color: red; color: white; counter-reset: h4 } h1:before { background-color: red; color: white; counter-increment: h1; content: counter(h1) ". " } h2:before { background-color: red; color: white; counter-increment: h2; content: counter(h1) "." counter(h2) ". " } h3:before { background-color: red; color: white; counter-increment: h3; content: counter(h1) "." counter(h2) "." counter(h3) ". " } h4:before { background-color: red; color: white; counter-increment: h4; content: counter(h1) "." counter(h2) "." counter(h3) "." counter(h4) ". " } p{ color: black; font-family: "Arial", Helvetica, sans-serif; } article { max-width: 50em; background: white; padding: 2em; margin: 1em auto; } .table-of-contents { float: right; width: 40%; background: #eee; font-size: 0.8em; padding: 1em 2em; margin: 0 0 0.5em 0.5em; } .table-of-contents ul { padding: 0; } .table-of-contents li { margin: 0 0 0.25em 0; } .table-of-contents a { text-decoration: none; } .table-of-contents a:hover, .table-of-contents a:active { text-decoration: underline; } h3:target { animation: highlight 1s ease; } @keyframes highlight { from { background: yellow; } to { background: white; } } li{ color: black; font-family: "Arial", Helvetica, sans-serif; } table{ color: black; font-family: "Arial", Helvetica, sans-serif; } } } </style> <h1 id="current-measurement"> <a href="#current-measurement" aria-labelledby="current-measurement" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current Measurement </h1> <p>The phase current information is crucial to control the torque of the motor of an electric drive with Field Oriented Control. The following section describes different current measurement principles in an electric drive, and how it can be configured with Motor Control Plant.</p> <h2 id="current-measurement-principles"> <a href="#current-measurement-principles" aria-labelledby="current-measurement-principles" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Current Measurement Principles: </h2> <p>Figure 1 shows different measurement principles used for phase current measurement in an electric drive.</p> <p align="center"> <img src="images/current_measurement.jpg" /> <figcaption align="center">Figure.1 - Current Measurement Principles </figcaption> </p> <p>Each of the above shown measurement principles has its own pros and cons. Discussion of all the measurement principles is beyond the scope on this section. Therefore, this document focuses on resistive based current measurement principles which are by far are the most sought after techniques.</p> <h2 id="resistive-based"> <a href="#resistive-based" aria-labelledby="resistive-based" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Resistive based </h2> <p>This technique places specially designed resistors usually referred as shunt resistors along the path of the current which has to be measured. The voltage drop across these shunt resistors is used to calculate the current values using Ohm’s law as follows:</p> <!-- $ i = \frac{V}{R} $ --> <p align="center"> <img style="transform: translateY(0.1em); background: white;" src="svg\Sy2CyWsPrS.svg" /> </p> <p>The resistive based techniques cost-effective solution for most of the low and medium power electric drives. Its other advantages include high accuracy, high bandwidth, low temperature drift and unlike magnetic based sensors it does not have any remanence. As with any other techniques resistive based techniques have their own drawbacks. By design, they do not provide any galvanic isolation, and incurs power losses while measurement. Refer <a href="https://ww1.microchip.com/downloads/en/AppNotes/01332B.pdf">AN1332</a> for more details.</p> <p>Based on where number shunts and their respective location for measuring current in an electric drive, the resistive based techniques can be classified into three categories:</p> <ol> <li>Three shunt</li> <li>Dual shunt</li> <li>Single shunt</li> </ol> <h3 id="three-shunt"> <a href="#three-shunt" aria-labelledby="three-shunt" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Three shunt </h3> <p>Figure 2 shows a three shunt phase current measurement technique.</p> <p align="center"> <img src="images/triple_shunt_current_measurement.jpg" /> <figcaption align="center">Figure.2 - Three shunt current measurement </figcaption> </p> <p>This technique employs three shunt resistors along the three inverter legs. At each modulation cycle, when the low side FETs are switched on, the phase currents are measured.</p> <p>The three shunt current measurement has some advantages. The three shunt technique generally selects the two samples for which the low side FET were switched on for a longer duration, and the third current is calculated from Kirchhoff’s current law (KCL). Hence, a lower bandwidth amplifiers can be used to measure the voltages. Additionally, this makes over-modulation simpler.</p> <h3 id="dual-shunt"> <a href="#dual-shunt" aria-labelledby="dual-shunt" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Dual shunt </h3> <p>Figure 3 shows a typical dual current measurement technique.</p> <p align="center"> &lt;img src="images/dual_shunt_current_measurement.jpg "Dual shunt current measurement") .jpg" /&gt; <figcaption align="center">Figure.3 - Dual shunt current measurement </figcaption> </p> <p>This technique employs two shunt resistors along the three inverter legs. At each modulation cycle, when the low side FETs are switched on, the phase currents of the two respective legs are then measured. The third current is calculated from Kirchhoff’s current law (KCL).</p> <h3 id="single-shunt"> <a href="#single-shunt" aria-labelledby="single-shunt" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Single shunt </h3> <p>Figure 4 shows a typical single current measurement technique.</p> <p align="center"> <img src="images/single_shunt_current_measurement.jpg" /> <figcaption align="center">Figure.4 - Single shunt current measurement </figcaption> </p> <p>This technique measures the DC link current and, with knowledge of the switching states, reconstructs each of the three-phase currents. For more technical details refer <a href="https://ww1.microchip.com/downloads/en/Appnotes/01299A.pdf">AN1299</a></p> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2022 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>

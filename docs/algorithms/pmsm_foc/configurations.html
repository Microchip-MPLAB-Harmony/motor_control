<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <link rel="shortcut icon" href="../../favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="../../assets/css/just-the-docs-default.css"> <script async src="https://www.googletagmanager.com/gtag/js?id=UA-2724382-16"></script> <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'UA-2724382-16'); </script> <script type="text/javascript" src="../../assets/js/vendor/lunr.min.js"></script> <script type="text/javascript" src="../../assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.7.1 --> <title>Configuring the Library | Harmony 3 Motor Control</title> <meta name="generator" content="Jekyll v3.9.0" /> <meta property="og:title" content="Configuring the Library" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Harmony 3 Motor Control package" /> <meta property="og:description" content="Harmony 3 Motor Control package" /> <link rel="canonical" href="../../algorithms/pmsm_foc/configurations.html" /> <meta property="og:url" content="../../algorithms/pmsm_foc/configurations.html" /> <meta property="og:site_name" content="Harmony 3 Motor Control" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Configuring the Library" /> <script type="application/ld+json"> {"@type":"WebPage","url":"../../algorithms/pmsm_foc/configurations.html","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"../../assets/images/vendor/microchip_mplab_harmony_logo_150_transparent.png"}},"headline":"Configuring the Library","description":"Harmony 3 Motor Control package","@context":"https://schema.org"}</script> <!-- End Jekyll SEO tag --> </head> <body> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="../../index.html" class="site-title lh-tight"> <div class="site-logo"></div> </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav role="navigation" aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="../../index.html" class="nav-list-link">Microchip MPLAB® Harmony 3 Motor Control</a></li><li class="nav-list-item"><a href="../../algorithms/pmsm_foc/readme.html" class="nav-list-link">PMSM FOC Component</a></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../algorithms/pmsm_foc/mc_plant_docs/introduction.html" class="nav-list-link">Motor Control Plant Projects</a><ul class="nav-list "><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../algorithms/pmsm_foc/mc_plant_docs/theory/theoretical_background.html" class="nav-list-link">Theoretical Background</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/theory/pmsm_motor.html" class="nav-list-link">Permanent Magnet Synchronous Motors</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/theory/field_oriened_control.html" class="nav-list-link">Field Oriented Control</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/theory/current_measurement.html" class="nav-list-link">Current Measurement</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/theory/rotor_position_measurement.html" class="nav-list-link">Rotor Position Calculation</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../algorithms/pmsm_foc/mc_plant_docs/theory/software_design.html" class="nav-list-link">Software Design</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/theory/software_architecture.html" class="nav-list-link">Implementation Details</a> </li></ul></li><li class="nav-list-item "><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/getting_started.html" class="nav-list-link">Getting Started</a><ul class="nav-list"><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/create_mc_project_with_mcc.html" class="nav-list-link">Create MCC project for MC Plant</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/motor_control_plant_manager.html" class="nav-list-link">MC Plant Manager</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/hardware_modules.html" class="nav-list-link">Hardware Modules</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/peripheral_modules.html" class="nav-list-link">Peripheral Modules</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/software_modules.html" class="nav-list-link">Software Modules</a> </li><li class="nav-list-item "> <a href="../../algorithms/pmsm_foc/mc_plant_docs/mc_plant/generate_mc_code_with_mcc.html" class="nav-list-link">Generate Code with MCC</a> </li></ul></li></ul></li><li class="nav-list-item active"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../algorithms/pmsm_foc/non_mc_plant.html" class="nav-list-link">Non Motor Control Plant Projects</a><ul class="nav-list "><li class="nav-list-item "><a href="../../algorithms/pmsm_foc/sw_design.html" class="nav-list-link">Software Design</a></li><li class="nav-list-item "><a href="../../algorithms/pmsm_foc/control_algorithm.html" class="nav-list-link">Control Algorithm</a></li><li class="nav-list-item active"><a href="../../algorithms/pmsm_foc/configurations.html" class="nav-list-link active">Configuring the Library</a></li><li class="nav-list-item "><a href="../../algorithms/pmsm_foc/using_the_library.html" class="nav-list-link">Using the Library</a></li></ul></li><li class="nav-list-item"><a href="#" class="nav-list-expander"><svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg></a><a href="../../release_notes.html" class="nav-list-link">Release notes</a><ul class="nav-list "><li class="nav-list-item "><a href="../../apps/readme.html" class="nav-list-link">Motor Control Application Repositories</a></li></ul></li><li class="nav-list-item"><a href="../../mplab_harmony_license.html" class="nav-list-link">License</a></li><li class="nav-list-item"><a href="../../plugins/mc_plant/intro.html" class="nav-list-link">Getting Started with Create React App</a></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div class="search"> <div class="search-input-wrap"> <input type="text" id="search-input" class="search-input" tabindex="0" placeholder="Search Harmony 3 Motor Control" aria-label="Search Harmony 3 Motor Control" autocomplete="off"> <label for="search-input" class="search-label"><svg viewBox="0 0 24 24" class="search-icon"><use xlink:href="#svg-search"></use></svg></label> </div> <div id="search-results" class="search-results"></div> </div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="https://support.microchip.com" class="site-button" > Obtain Support from Microchip </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <nav aria-label="Breadcrumb" class="breadcrumb-nav"> <ol class="breadcrumb-nav-list"> <li class="breadcrumb-nav-list-item"><a href="../../algorithms/pmsm_foc/non_mc_plant.html">Non Motor Control Plant Projects</a></li> <li class="breadcrumb-nav-list-item"><span>Configuring the Library</span></li> </ol> </nav> <div id="main-content" class="main-content" role="main"> <h2 id="configuring-the-library"> <a href="#configuring-the-library" aria-labelledby="configuring-the-library" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Configuring the Library </h2> <p>Different UI configurations are explained below.</p> <h3 id="control-algorithm-parameters"> <a href="#control-algorithm-parameters" aria-labelledby="control-algorithm-parameters" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Algorithm Parameters </h3> <p>Allows to select application mode like open loop or speed loop or torque loop.</p> <p>Position feedback determines the feedback loop implementation like PLL estimator sensorless or Encoder based sensored algorithm.</p> <p><img src="../../algorithms/pmsm_foc/images/control_strategy.jpg" alt="control algorithm" /></p> <p>This allows to configure startup parameters and control loop PI parameters.</p> <p><img src="../../algorithms/pmsm_foc/images/control_parameters.jpg" alt="pi parameters" /></p> <h3 id="flying-start-parameters"> <a href="#flying-start-parameters" aria-labelledby="flying-start-parameters" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Flying Start Parameters </h3> <p>Allows configuration of Flying Start Detection Parameters.</p> <p>By default, the implementation of this mode is part of an archive file lib_mc_flyingstart.a. In order to access the source file, please contact <a href="https://www.microchip.com/salesdirectory">Microchip’s Local Sales Office</a>.</p> <ul> <li> <p>Flying Start Detect mode uses a separate set of current controller PI gains which can be different than current control PI gains used in normal Run mode. It is recommended that in Flying Start Mode, the current controllers should have higher bandwidth than during normal Run mode.</p> </li> <li> <p>Flying Start Detect Duration - Defines the duration in seconds for which the control algorithm will attempt to ascertain if the motor is freewheeling.</p> </li> <li> <p>Minimum Flying Start Speed - Defines the minimum speed in RPM below which if the motor is freewheeling, the control algorithm would deem it as “Not Freewheeling”</p> </li> <li> <p>Flying Start Current - Defines the starting current in A which would be used during transition from Flying Start Detection -&gt; Closed Loop operation.</p> </li> <li> <p>Null Vector Braking Duration - Defines the passive braking duration in seconds, implemented by applying null vector pulses to the motor windings.</p> </li> <li> <p>Regenerative Braking - When enabled, if the motor’s freewheeling speed is above the minimum flying start detect speed and in the opposite direction to that of command direction, the control algorithm would actively brake the motor using regenerative braking until the motor speed falls below minimum flying start detect speed.</p> <ul> <li>Peak Regenerative Braking Current - Defines the maximum regenerative braking current applied in A.</li> <li>Regenerative Braking Ramp Duration - Defines the duration in seconds during which the regenerative braking current ramps from 0 to Peak Regenerative Braking Current.</li> </ul> </li> </ul> <h3 id="pwm-configurations"> <a href="#pwm-configurations" aria-labelledby="pwm-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> PWM Configurations </h3> <p>Select the PWM frequency and PWM channels used to drive Phase U, V and W based on board connections. Selected configurations are passed to the PWM PLIB. PWM PLIB is auto-configured for FOC algorithm.</p> <p><img src="../../algorithms/pmsm_foc/images/pwm_parameters.jpg" alt="pwm" /></p> <p>*Note: Flying start is not supported in SAMC21 and PIC32MK CM MC project.</p> <h3 id="adc-configurations"> <a href="#adc-configurations" aria-labelledby="adc-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> ADC Configurations </h3> <p>Select ADC channels used for Phase U current, Phase V Current, DC Bus voltage and potentiometer based on the board connections. Selected configurations are passed to the ADC PLIB. ADC PLIB is auto-configured for FOC algorithm.</p> <p><img src="../../algorithms/pmsm_foc/images/adc_parameters.jpg" alt="adc" /></p> <h3 id="encoder-configurations"> <a href="#encoder-configurations" aria-labelledby="encoder-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Encoder Configurations </h3> <p>Select the number of encoder pulses per revolution of the motor. Selected configurations are passed to the QDEC PLIB.</p> <p><img src="../../algorithms/pmsm_foc/images/encoder.jpg" alt="encoder" /></p> <h3 id="motor-parameters"> <a href="#motor-parameters" aria-labelledby="motor-parameters" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Motor Parameters </h3> <p>Allows to configure motor parameters. Microchip direct motors are selectable and pre-configured. User can select custom motor to configure parameters for other motors.</p> <p><img src="../../algorithms/pmsm_foc/images/motor_parameters.jpg" alt="motor parameters" /></p> <h3 id="control-board-parameters"> <a href="#control-board-parameters" aria-labelledby="control-board-parameters" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Control Board Parameters </h3> <p>Allows to configure control board parameters. Microchip’s motor control development boards like dsPICDEM MCLV-2 development board are selectable and pre-configured. User can select custom board to configure parameters for other boards.</p> <p><img src="../../algorithms/pmsm_foc/images/board_parameters.jpg" alt="control board" /></p> <h3 id="io-pin-configurations"> <a href="#io-pin-configurations" aria-labelledby="io-pin-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> IO Pin Configurations </h3> <p>Configure I/O pins for PWM, ADC, Encoder, UART, input switches and LEDs using the pin manager.</p> <h3 id="clock-configurations"> <a href="#clock-configurations" aria-labelledby="clock-configurations" class="anchor-heading"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Clock Configurations </h3> <p>CPU clock speed is defaulted to maximum recommended clock frequency of the MCU. View or modify the clock speed using clock manager.</p> <hr> <footer> <p class="text-small text-grey-dk-000 mb-0"><img src='https://raw.githubusercontent.com/wiki/Microchip-MPLAB-Harmony/Microchip-MPLAB-Harmony.github.io/images/microchip_logo.png' /><br />Copyright &copy; 2020 Microchip Technology.</p> <!-- <p class="text-small text-grey-dk-000 mb-0"><img src='../../assets/images/vendor/microchip_logo.png' /><br /> Copyright &copy; 2022 Microchip Technology.</p> --> </footer> </div> </div> <div class="search-overlay"></div> </div> </body> </html>

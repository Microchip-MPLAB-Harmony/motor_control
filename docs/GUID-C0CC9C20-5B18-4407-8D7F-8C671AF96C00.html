<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="Setting Hardware Modules" />
<meta name="DC.relation" scheme="URI" content="GUID-AAD7DFD9-61EF-4575-AB8A-087ABDB3AF58.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="setting-hardware-modules" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>Setting Hardware Modules</title>
<meta name="Microsoft.Help.Id" content="GUID-0A4BC4EE-29F5-4736-8125-17139B84E7B5-setting-hardware-modules" />
<meta name="Microsoft.Help.TocParent" content="GUID-0A4BC4EE-29F5-4736-8125-17139B84E7B5" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLABÂ® Harmony 3 Motor Control Reference A 12/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-C0CC9C20-5B18-4407-8D7F-8C671AF96C00"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="setting-hardware-modules">
<h1 class="title topictitle1" id="ariaid-title1">Setting Hardware Modules</h1><div class="body"><p class="p">This section describes how to set-up hardware modules for motor control application project with Harmony QSpin.</p>
<p class="p"><strong class="ph b">Configure PMSM parameters</strong>
The PMSM parameter can be configured in following simple steps:</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Click on the motor block to open PMSM parameter window as shown below.
<img class="image" src="GUID-2ADF2D0B-AB31-4D33-895A-89FFE35175EE-low.jpg" alt="Motor Parameters" /><br /></p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Configure the motor parameters as shown below.</p>
</li>
</ol>
<br /><img class="image" src="GUID-3D13F4D3-C21E-44F9-B0E1-4AE37F8D9EB3-low.jpg" alt="Select Motor" /><br /><ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Close the window
<strong class="ph b">Configure Development Board</strong>
There are two ways by which the motor control board can be configured.</p>
</li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">By selecting the board from the list of Microchip's development boards and reference designs.</p>
</li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">By configuring the board Parameters from scratch.</p>
</li>
</ol>
<p class="p"><strong class="ph b">Microchip's Development Board and Reference Designs</strong>
Microchip offers a number of motor control development boards and reference designs. These boards can be selected from <strong class="ph b">Quick Settings</strong> logo to use these boards for developmental activities.</p>
<p class="p">Following steps list the procedure to select the Harmony Qspin supported development board and reference design.</p>
<ul class="ul"><li class="li"><p class="p">Click on the "Quick setting" icon as shown below.
<img class="image" src="GUID-5654C28D-B7E8-46C7-9784-373FF978AC6B-low.jpg" alt="Quick Settings" /><br /></p>
</li>
<li class="li"><p class="p">Select appropriate motor from "Select Board" option as shown below.</p>
</li>
</ul>
<br /><img class="image" src="GUID-7A15835A-CA41-4E35-93AA-928F435F08A8-low.jpg" alt="Quick Settings" /><br /><p class="p"><strong class="ph b">Setting Board Parameters from Scratch</strong>
The Harmony Qspin can be used to configure the board parameters from scratch. Following steps list the procedure to configure the board parameters from scratch.</p>
<p class="p">**Setting Analog Front End **
The following section describes various analog front end circuit and how it can be configured using Harmony Qspin.</p>
<p class="p">** Theoretical Background**
The Field Oriented Control of an AC motor requires current, voltage and rotor position information. These signals are processed using analog circuits before it is sent to the microcontroller to be used for the control tasks. The control software has to be cognizant of these analog circuit parameters in order to reconstruct the actual analog signal for control operations.</p>
<p class="p">** Phase Current Measurement**
There are a number of other ways of measuring the phase currents. For brief introduction refer <a class="xref" href="current_measurement.html">Current Measurement in AC motor drives</a>.</p>
<p class="p"><strong class="ph b">DC Bus Voltage Measurement</strong>
The DC bus voltage is usually measured by using a resistor based potential divider.</p>
<p class="p"><strong class="ph b">Configuring Analog front End with Harmony Qspin</strong>
In Harmony Qspin analog parameters can be set in following steps.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Launch <strong class="ph b">Analog Front End</strong> by clicking on the block</p>
<br /><img class="image" src="GUID-6932E3FA-9C08-452D-AB0C-2F9C306838D1-low.jpg" alt="Analog Front End" /><br /></li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Configure <strong class="ph b">Phase A</strong> current measurement analog circuit parameters by clicking on the IaSens icon.</p>
<br /><img class="image" src="GUID-29C5B165-CE9A-42A4-A432-852F0ADAFB7B-low.jpg" alt="Ia" /><br /></li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Configure <strong class="ph b">Phase B</strong> current measurement analog circuit parameters by clicking on the IbSens icon.</p>
<br /><img class="image" src="GUID-D3F507BD-0CB3-47FE-B600-FC09ADA25EC0-low.jpg" alt="Ib" /><br /></li>
<li class="li"><span class="indent-level-default">4.</span><p class="p">Configure <strong class="ph b">DC Bus</strong> current measurement analog circuit parameters by clicking on the VdcSens icon.</p>
<br /><img class="image" src="GUID-8E91B040-37CD-4BE2-9CC2-43CFC90B78F6-low.jpg" alt="Vdc" /><br /></li>
</ol>
<p class="p"><strong class="ph b">Setting Analog Interface</strong>
The following section describes the analog interfaces and how it can be configured using Harmony Qspin.</p>
<p class="p">** Theoretical Background**
The analog signals has to be converted to digital signals for the microcontroller devices to use. For Field Oriented control, the analog signals are converted to corresponding digital signals using ADCs.</p>
<p class="p">The software essentially has to perform following tasks:</p>
<ul class="ul"><li class="li"><p class="p">Set the ADC unit and channel to be used to convert analog signals to digital signals</p>
</li>
<li class="li"><p class="p">Configure ADC parameters like resolution, trigger source etc.</p>
</li>
</ul>
<p class="p"><strong class="ph b">Configuring Analog Interface using Harmony Qspin</strong>
In Harmony Qspin analog parameters can be set in following steps.</p>
<ol class="ol"><li class="li"><span class="indent-level-default">1.</span><p class="p">Launch <strong class="ph b">Analog Interface</strong> by clicking on the block</p>
<br /><img class="image" src="GUID-C9D29EAB-C8B4-4C42-929D-CB540C6FCD3B-low.jpg" alt="Analog Interface" /><br /></li>
<li class="li"><span class="indent-level-default">2.</span><p class="p">Configure analog interface <strong class="ph b">Group 01</strong> signals, i.e. phase current A and phase current B by clicking on <strong class="ph b">Group 01</strong> icon</p>
<br /><img class="image" src="GUID-181B935D-C4B4-4D90-AAFC-A5526C427713-low.jpg" alt="Group 01 Signals" /><br /></li>
<li class="li"><span class="indent-level-default">3.</span><p class="p">Configure analog interface <strong class="ph b">Group 02</strong> signals, i.e. DC bus voltage and potentiometer by clicking on <strong class="ph b">Group 02</strong> icon</p>
<br /><img class="image" src="GUID-08699EB3-BB95-4A71-AB5E-B4F778F8C2B2-low.jpg" alt="Group 02 Signals" /><br /></li>
</ol>
</div>
<div class="related-links">
<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-AAD7DFD9-61EF-4575-AB8A-087ABDB3AF58.html">Getting Started</a></div>
</div>
</div></body>
</html>
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE11" /><meta name="copyright" content="(C) Copyright 2022" />
<meta name="DC.rights.owner" content="(C) Copyright 2022" />
<meta name="DC.type" content="topic" />
<meta name="DC.title" content="PMSM FOC" />
<meta name="DC.relation" scheme="URI" content="GUID-2B6B6F12-935C-4885-9BE8-433B98EC11F4.html" />
<meta name="DC.relation" scheme="URI" content="GUID-C8A962A9-21E8-4034-9826-BF47F79E568F.html" />
<meta name="DC.relation" scheme="URI" content="GUID-C79D218F-74E3-4A96-AD8E-19AAABAAB5E1.html" />
<meta name="DC.format" content="XHTML" />
<meta name="DC.identifier" content="pmsm-foc" />
<link rel="stylesheet" type="text/css" href="stylesheets/atmel.css" />
<title>PMSM FOC</title>
<meta name="Microsoft.Help.Id" content="GUID-0A4BC4EE-29F5-4736-8125-17139B84E7B5-pmsm-foc" />
<meta name="Microsoft.Help.TocParent" content="GUID-0A4BC4EE-29F5-4736-8125-17139B84E7B5" />
<meta name="Microsoft.Help.TocOrder" content="0" />
<meta name="Microsoft.Help.Locale" content="en-US" />
<meta name="Microsoft.Help.TopicLocale" content="en-US" />
<meta name="Microsoft.Help.DisplayVersion" content="MPLAB® Harmony 3 Motor Control Reference A 12/2021" />
<script language="javascript">
       
       if (window.parent.location.protocol != 'file:') {
				document.addEventListener('click', function(e) {
				    if (e.target) {
               if (e.target.nodeName == "A" ) {
                    if (!e.target.target) {
                      e.preventDefault();
                      e.stopPropagation();
                              
                      var origUrl = window.parent.location.href.substr(0, window.parent.location.href.indexOf("?"));
                      if (origUrl.length === 0) {
                          origUrl = window.parent.location.href;
                      }
                      var href= e.target.getAttribute("href");
                      var parts = href.split("#");
          
                      var url = "";
                      if (parts.length == 2 ) {
                        if (!parts[0].length) {
                            url = window.parent.location.search.replace('?','')
                        } else {
                            url = parts[0].replace('.html','');
                        }
                      } else {
                        url = parts[0].replace('.html','');
                      }

                      if (parts.length == 2) {
                          url += "#" + parts[1];
                      }
    
                      window.parent.location.href = origUrl + "?" + url;

                      return false;
                    }
               }
            }
				});
			}

		</script><script language="javascript">
         
         function copyContent(content, button) {
         
            var textArea = document.createElement("textarea");
            
            // Place in the top-left corner of screen regardless of scroll position.
            textArea.style.position = 'fixed';
            textArea.style.top = 0;
            textArea.style.left = 0;
            
            // Ensure it has a small width and height. Setting to 1px / 1em
            // doesn't work as this gives a negative w/h on some browsers.
            textArea.style.width = '2em';
            textArea.style.height = '2em';
            
            // We don't need padding, reducing the size if it does flash render.
            textArea.style.padding = 0;
            
            // Clean up any borders.
            textArea.style.border = 'none';
            textArea.style.outline = 'none';
            textArea.style.boxShadow = 'none';
            
            // Avoid flash of the white box if rendered for any reason.
            textArea.style.background = 'transparent';
            
            textArea.value = content;
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
               var successful = document.execCommand('copy');
               var msg = successful ? 'successful' : 'unsuccessful';
               if (!button.classList.contains("copied")){
                  button.textContent = "Copied";
                  button.classList.add("copied");
                  setTimeout(function(){
                     button.textContent = "Copy";
                     button.classList.remove("copied");
                  },1000);
               }
            } catch (err) {
               console.log('Oops, unable to copy');
            }
            
            document.body.removeChild(textArea);
         }
         
         function cpy(id, button) {
            var element = document.getElementById(id);
            var content = element.getAttribute("content");
            
            copyContent(content, button);
         }
         
         document.addEventListener("DOMContentLoaded", function(event) {
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.style.position = "relative";
               var copy = document.createElement("button");
               copy.textContent = "Copy";
               copy.setAttribute("class", "copy-code");
               
               var content = elem.textContent;
               
               copy.addEventListener("click", function(){
                  copyContent(content, copy);
               });
               
               elem.addEventListener("mouseenter", function(evt){
                  elem.prepend(copy);
               });
            });
            
            document.querySelectorAll(".codeblock").forEach(function(elem) {
               elem.addEventListener("mouseleave", function(evt){
                  document.querySelector(".copy-code").remove();
               });
            });
         });
         
      </script><script language="javascript">
          
          // Add the MathML namespace to html
          var html = document.getElementsByTagName("html")[0],
          head = document.getElementsByTagName("head")[0];
          
          var mathJax = document.createElement("script");
          mathJax.src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML";
          head.appendChild(mathJax);
          
          html.setAttribute("xmlns:m","http://www.w3.org/1998/Math/MathML");
          
          function inIframe() { try { return window.self !== window.top; } catch (e) { return true; } }
          
          if (!inIframe()) { 
          
          var Default = "index.html?GUID-FF2C273A-D569-41B4-BA69-8C34183EEA76"; 
          
          var displaylocation = "value" + window.location.href;
          
          var GUIDS = displaylocation.split('GUID');          
          
          if (displaylocation.indexOf('#GUID') != -1) {            
          var First = GUIDS[1].split('.html');  
          if (GUIDS[3]){First = GUIDS[2].split('.html');}
          if (GUIDS[4]){First = GUIDS[3].split('.html');}
          if (GUIDS[5]){First = GUIDS[4].split('.html');}
          
          var Second = GUIDS[2].split('#');   
          if (GUIDS[3]){Second = GUIDS[3].split('#');}
          if (GUIDS[4]){Second = GUIDS[4].split('#');}
          if (GUIDS[5]){Second = GUIDS[5].split('#');}
          
          Default = "index.html?" + "GUID" + First[0] + "GUID" + Second[0];     
          }                    
          window.top.location = Default;
          }       
          
        </script><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /><style xml:space="">
        
          button.copy-code{
            display:none;
            padding:0.7em 1.4em;
            margin:0 0.3em 0.3em 0;
            border-radius:0.15em;
            box-sizing: border-box;
            text-decoration:none;
            font-family:'Roboto',sans-serif;
            text-transform:uppercase;
            font-weight:400;
            color:#FFFFFF;
            background-color:#9c9c9c;
            box-shadow:inset 0 -0.6em 0 -0.35em rgba(0,0,0,0.17);
            text-align:center;
            position:relative;
            border: 0;
            float: right;
            border-radius: .5em;
            cursor: pointer;
          }
          button.copy-code:active{
            top:0.1em;
          }
          
          pre:hover button.copy-code{
            display: inline-block !important;
          }
          button.copy-code.copied {
            cursor: default !important;
          }
          
          
          @media all and (max-width:30em){
            button.copy-code{
              display:block;
              margin:0.4em auto;
            }
          }
        
        
      </style><link rel="stylesheet" type="text/css" href="syntax-highlight.css" /></head>
<body id="pmsm-foc">
<h1 class="title topictitle1" id="ariaid-title1">PMSM FOC</h1><div class="body"><p class="p">PMSM_FOC component provides Field Oriented Control (FOC) algorithm for Permanent Magnet Synchronous Motor (PMSM).
This component supports speed control with an inner current control loop to control motor speed and motor current. It also supports current control and open loop mode. Rotor position estimation techniques are configurable in the UI.</p>
<p class="p">PMSM_FOC connects to the Peripheral Libraries (PLIBs) from CSP repository and X2CScope component from X2C repository.</p>
<p class="p">This component depends on ADC PLIB for phase current measurement, DC bus voltage and potentiometer measurement. PWM PLIB is used to generate three phase signals to control the motor. For quadrature encoder sensor position feedback, PMSM_FOC interacts with QDEC peripheral.</p>
<p class="p">In addition to the generation of code, it also provides back-end support for <strong class="ph b">Harmony QSpin Motor Control</strong>.</p>
<p class="p"><strong class="ph b">Supported Microcontrollers and Development Boards</strong></p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d1400e31"><span>Microcontroller</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d1400e33"><span>MCLV2</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d1400e35"><span>MCHV3</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e31 "><span>SAME70</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e33 "><span>Yes</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e35 "><span>Yes</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e31 "><span>SAME54</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e33 "><span>Yes</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e35 "><span>Yes</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e31 "><span>SAMC21</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e33 "><span>Yes</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e35 "><span>Yes</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e31 "><span>PIC32MK MCF</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e33 "><span>Yes</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e35 "><span>Yes</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e31 "><span>PIC32MK MCM</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e33 "><span>Yes</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e35 "><span>Yes</span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e31 "><span>PIC32CM MC</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e33 "><span>Yes</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e35 "><span>Yes</span></td>
</tr>
</tbody>
</table>
</div>
<p class="p"><strong class="ph b">Harmony QSpin Motor Control</strong>
The <strong class="ph b">Harmony QSpin</strong> is an extension of the MPLAB® ecosystem for developing Microchip’s next-generation application firmware for motor control on Microchip® 32-bit devices.</p>
<p class="p">It has a graphical tool that enables an effortless configuration and generation of motor control application C code for Microchip 32-bit devices.</p>
<p class="p">The details of the tool is available at <a class="xref" href="GUID-C79D218F-74E3-4A96-AD8E-19AAABAAB5E1.html">Harmony QSpin</a>.</p>
<p class="p">The following table summarizes the supported Microchip's 32-bit MCUs in Harmony QSpin:</p>

<div class="tablenoborder"><table cellpadding="4" cellspacing="0" summary="" class="table" frame="border" border="1" rules="all"><col style="width:" /><col style="width:" /><thead class="thead" style="text-align:left;"><tr class="row"><th class="entry cellrowborder" style="vertical-align:middle;" id="d1400e103"><span>Device Families</span></th>
<th class="entry cellrowborder" style="vertical-align:middle;" id="d1400e105"><span>Links</span></th>
</tr>
</thead>
<tbody class="tbody"><tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e103 "><span>PIC32MK</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e105 "><span><a class="xref" href="https://www.microchip.com/en-us/products/microcontrollers-and-microprocessors/32-bit-mcus/pic32-32-bit-mcus/pic32mk" target="_blank">PIC32MK Family</a></span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e103 "><span>SAM E5x</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e105 "><span><a class="xref" href="https://www.microchip.com/en-us/products/microcontrollers-and-microprocessors/32-bit-mcus/sam-32-bit-mcus/sam-e" target="_blank">SAME5x Family</a></span></td>
</tr>
<tr class="row"><td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e103 "><span>SAM E7x</span></td>
<td class="entry cellrowborder" style="vertical-align:middle;" headers="d1400e105 "><span><a class="xref" href="https://www.microchip.com/en-us/products/microcontrollers-and-microprocessors/32-bit-mcus/sam-32-bit-mcus/sam-e" target="_blank">SAME7x Family</a></span></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="related-links">
<ul class="ullinks">
<li class="link ulchildlink"><strong><a href="GUID-C8A962A9-21E8-4034-9826-BF47F79E568F.html">Projects without Harmony QSpin</a></strong><br />
</li>
<li class="link ulchildlink"><strong><a href="GUID-C79D218F-74E3-4A96-AD8E-19AAABAAB5E1.html">QSpin Motor Control Configuration</a></strong><br />
</li>
</ul>

<div class="familylinks">
<div class="parentlink"><strong>Parent topic:</strong> <a class="link" href="GUID-2B6B6F12-935C-4885-9BE8-433B98EC11F4.html">Microchip MPLAB® Harmony 3 Motor Control</a></div>
</div>
</div><div class="topic nested1" aria-labelledby="ariaid-title2" id="pmsm-foc-component-for-devices-without-harmony-qspin-support"><h2 class="title topictitle2" id="ariaid-title2">PMSM FOC Component for devices without Harmony QSpin support</h2><div class="body"><p class="p">This section describes the software design, algorithm and configuration options for those devices which do not have <strong class="ph b">QSPin</strong> support yet.</p>
<p class="p">The following table shows the supported features with PMSM FOC Component.
<img class="image" src="GUID-0064B35E-11C7-43E4-AFDB-3D9A88A8C238-low.jpg" alt="supported_features" /><br /></p>
<p class="p"><a class="xref" href="sw_design.html">Software Design</a></p>
<p class="p"><a class="xref" href="control_algorithm.html">Control Algorithm</a></p>
<p class="p"><a class="xref" href="configurations.html">Configuring the Library</a></p>
<p class="p"><a class="xref" href="using_the_library.html">Using the Library</a></p>
</div>
</div>
</body>
</html>